<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢—Ä–µ–Ω–∞–∂–µ—Ä –ì–∞—Ä—è—á–∏—Ö –ö–ª–∞–≤—ñ—à</title>
    <!-- –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Å—Ç–∏–ª—ñ –¥–ª—è –≥—Ä–∏ */
        body {
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        /* –°—Ç–∏–ª—å –¥–ª—è —Ç–∞–π–º–µ—Ä–∞ */
        #timer-bar {
            transition: width 0.1s linear;
        }

        /* –ê–Ω—ñ–º–∞—Ü—ñ—è –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ—ó –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ */
        @keyframes correct-flash {
            0% { background-color: #1f2937; } /* bg-gray-800 */
            50% { background-color: #22c55e; } /* –ó–µ–ª–µ–Ω–∏–π */
            100% { background-color: #1f2937; }
        }
        .correct-animation {
            animation: correct-flash 0.3s ease-out;
        }

        /* –ê–Ω—ñ–º–∞—Ü—ñ—è –¥–ª—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ—ó –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ */
        @keyframes incorrect-shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        .incorrect-animation {
            animation: incorrect-shake 0.3s ease-out;
            background-color: #ef4444; /* –ß–µ—Ä–≤–æ–Ω–∏–π */
        }
        
        /* –°—Ç–∏–ª—ñ –¥–ª—è —Ä–æ–±–æ—á–æ—ó –æ–±–ª–∞—Å—Ç—ñ */
        #workspace1, #workspace2 {
            font-family: monospace;
            caret-color: #34d399; /* –ö–æ–ª—ñ—Ä –∫—É—Ä—Å–æ—Ä–∞ */
            /* –ó–ê–ë–û–†–û–ù–ê –í–ò–î–Ü–õ–ï–ù–ù–Ø –ú–ò–®–ï–Æ */
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        /* –ü—Ä–∏—Ö–æ–≤—É—î–º–æ –∫—É—Ä—Å–æ—Ä, –∫–æ–ª–∏ –≤—ñ–Ω –Ω–µ–∞–∫—Ç–∏–≤–Ω–∏–π */
        #workspace1:not(:focus), #workspace2:not(:focus) {
            caret-color: transparent;
        }
        
        .hidden {
            display: none;
        }
    </style>
</head>
<body class="bg-gray-900 text-white flex items-center justify-center min-h-screen p-4">

    <div class="w-full max-w-4xl mx-auto bg-gray-800 rounded-2xl shadow-2xl p-6 md:p-10 transition-all">
        
        <h1 class="text-3xl md:text-4xl font-bold text-center mb-4 text-cyan-400">–¢—Ä–µ–Ω–∞–∂–µ—Ä –ì–∞—Ä—è—á–∏—Ö –ö–ª–∞–≤—ñ—à</h1>
        
        <!-- –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó -->
        <div class="bg-gray-700 p-4 rounded-lg mb-6 text-sm">
            <p class="font-bold mb-2">–Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó:</p>
            <p class="mb-1">–í–∏–∫–æ–Ω—É–π—Ç–µ –∑–∞–≤–¥–∞–Ω–Ω—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –≥–∞—Ä—è—á–∏—Ö –∫–ª–∞–≤—ñ—à. –®–≤–∏–¥–∫—ñ—Å—Ç—å –∑—Ä–æ—Å—Ç–∞—Ç–∏–º–µ!</p>
            <p class="mb-2"><strong class="text-yellow-300">–†—ñ–≤–µ–Ω—å 2 (–∑ 10 –±–∞–ª—ñ–≤):</strong> –í–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –±—É–¥–µ <strong class="text-yellow-300">–∫–ª—ñ–∫–Ω—É—Ç–∏ –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–µ –ø–æ–ª–µ</strong> –ø–µ—Ä–µ–¥ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è–º –∫–ª–∞–≤—ñ—à.</p>
            <ul class="list-disc list-inside">
                <li><strong class="text-cyan-300">–í–∏–¥—ñ–ª–∏—Ç–∏ –≤—Å–µ:</strong> Ctrl + A</li>
                <li><strong class="text-cyan-300">–ö–æ–ø—ñ—é–≤–∞—Ç–∏:</strong> Ctrl + C</li>
                <li><strong class="text-cyan-300">–í—Å—Ç–∞–≤–∏—Ç–∏:</strong> Ctrl + V</li>
                <li><strong class="text-cyan-300">–°–∫–∞—Å—É–≤–∞—Ç–∏:</strong> Ctrl + Z</li>
            </ul>
        </div>

        <!-- –Ü–≥—Ä–æ–≤–∞ –∑–æ–Ω–∞ -->
        <div id="game-container" class="relative">
            <!-- –†–∞—Ö—É–Ω–æ–∫ —Ç–∞ –†—ñ–≤–µ–Ω—å -->
            <div class="absolute top-2 right-2 bg-gray-900 px-4 py-2 rounded-lg shadow-inner z-10 text-right">
                <div>
                    <span class="font-medium">–†–∞—Ö—É–Ω–æ–∫:</span>
                    <span id="score" class="font-bold text-2xl text-cyan-400">0</span>
                </div>
                <div>
                    <span class="font-medium">–†—ñ–≤–µ–Ω—å:</span>
                    <span id="level" class="font-bold text-2xl text-cyan-400">1</span>
                </div>
            </div>

            <!-- –ó–∞–≤–¥–∞–Ω–Ω—è -->
            <div class="mb-4 text-center">
                 <p class="text-gray-400 text-lg mb-2">–ö–æ–º–∞–Ω–¥–∞:</p>
                <div id="task-display" class="text-4xl md:text-5xl font-extrabold text-white h-16 flex items-center justify-center">
                    <!-- –ó–∞–≤–¥–∞–Ω–Ω—è –∑'—è–≤–∏—Ç—å—Å—è —Ç—É—Ç -->
                </div>
            </div>

            <!-- –ó–æ–Ω–∞ –∑–∞–≤–¥–∞–Ω–Ω—è (–†–æ–±–æ—á–∞ –æ–±–ª–∞—Å—Ç—å) -->
            <div id="game-area" class="bg-gray-900 rounded-lg p-4 shadow-inner flex flex-col md:flex-row gap-4">
                
                <!-- –ü–æ–ª–µ 1 -->
                <div class="flex-1">
                    <label for="workspace1" class="mb-2 block text-center font-medium text-gray-400">–ü–æ–ª–µ 1</label>
                    <textarea 
                        id="workspace1" 
                        class="w-full h-48 bg-gray-800 text-white p-4 rounded-md border border-gray-700 focus:outline-none focus:border-cyan-500 focus:ring-2 focus:ring-cyan-500 resize-none"
                        spellcheck="false"
                        oncontextmenu="return false;"
                    ></textarea>
                </div>
                
                <!-- –ü–æ–ª–µ 2 (–¥–ª—è –†—ñ–≤–Ω—è 2) -->
                <div id="workspace2-container" class="flex-1 hidden">
                     <label for="workspace2" class="mb-2 block text-center font-medium text-gray-400">–ü–æ–ª–µ 2</label>
                    <textarea 
                        id="workspace2" 
                        class="w-full h-48 bg-gray-800 text-white p-4 rounded-md border border-gray-700 focus:outline-none focus:border-cyan-500 focus:ring-2 focus:ring-cyan-500 resize-none"
                        spellcheck="false"
                        oncontextmenu="return false;"
                    ></textarea>
                </div>

            </div>

            <!-- –¢–∞–π–º–µ—Ä -->
            <div class="w-full bg-gray-700 rounded-full h-4 mt-6 overflow-hidden shadow-inner">
                <div id="timer-bar" class="bg-cyan-500 h-4 rounded-full" style="width: 100%"></div>
            </div>
        </div>

        <!-- –û–≤–µ—Ä–ª–µ–π (–°—Ç–∞—Ä—Ç / –ö—ñ–Ω–µ—Ü—å –≥—Ä–∏) -->
        <div id="overlay" class="absolute inset-0 bg-gray-900 bg-opacity-95 flex flex-col items-center justify-center text-center p-4 rounded-2xl">
            <h2 id="overlay-title" class="text-4xl font-bold mb-4">–ü–æ—á–∞—Ç–∏ –≥—Ä—É</h2>
            <p id="overlay-score" class="text-2xl mb-6"></p>
            <button id="start-button" class="bg-cyan-500 hover:bg-cyan-400 text-gray-900 font-bold py-3 px-8 rounded-full text-xl shadow-lg transition-transform transform hover:scale-105">
                –ü–æ—á–∞—Ç–∏
            </button>
        </div>

    </div>

    <script>
        // --- DOM –ï–ª–µ–º–µ–Ω—Ç–∏ ---
        const scoreDisplay = document.getElementById('score');
        const levelDisplay = document.getElementById('level');
        const taskDisplay = document.getElementById('task-display');
        const timerBar = document.getElementById('timer-bar');
        const overlay = document.getElementById('overlay');
        const overlayTitle = document.getElementById('overlay-title');
        const overlayScore = document.getElementById('overlay-score');
        const startButton = document.getElementById('start-button');
        const gameArea = document.getElementById('game-area');
        const workspace1 = document.getElementById('workspace1');
        const workspace2 = document.getElementById('workspace2');
        const workspace2Container = document.getElementById('workspace2-container');

        // --- –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≥—Ä–∏ ---
        const LEVEL_UP_SCORE = 10;      // –ó–ú–Ü–ù–ï–ù–û: –†—ñ–≤–µ–Ω—å 2 –ø–æ—á–∏–Ω–∞—î—Ç—å—Å—è –∑ 10 –±–∞–ª—ñ–≤
        const STARTING_TIME = 5000;     // –ó–ú–Ü–ù–ï–ù–û: –ü–æ—á–∏–Ω–∞—î–º–æ –∑ 5 —Å–µ–∫—É–Ω–¥
        const MIN_TIME = 1000;
        const TIME_DECREMENT_FACTOR = 0.985; // –ó–ú–Ü–ù–ï–ù–û: –ü—Ä–∏—Å–∫–æ—Ä–µ–Ω–Ω—è 1.5%

        // --- –°—Ç–∞–Ω –≥—Ä–∏ ---
        let score = 0;
        let currentLevel = 1;
        let gameActive = false;
        let currentTaskKey = null;
        let currentIntervalTime = STARTING_TIME;
        
        let taskTimer = null;
        let timerInterval = null;
        let taskStartTime = 0;

        // --- –°—Ç–∞–Ω —Å–∏–º—É–ª—è—Ü—ñ—ó ---
        let gameClipboard = "";
        let undoState1 = "";
        let undoState2 = "";

        // --- –ë–ê–ù–ö –ó–ê–í–î–ê–ù–¨ ---
        // –ö–æ–∂–Ω–µ –∑–∞–≤–¥–∞–Ω–Ω—è –º–∞—î:
        // command: –¢–µ–∫—Å—Ç –Ω–∞ –µ–∫—Ä–∞–Ω—ñ
        // key: –ü—Ä–∞–≤–∏–ª—å–Ω–∞ –∫–ª–∞–≤—ñ—à–∞
        // level: –†—ñ–≤–µ–Ω—å
        // fieldId: 'workspace1' –∞–±–æ 'workspace2' (–¥–µ –º–∞—î –±—É—Ç–∏ —Ñ–æ–∫—É—Å)
        // setup: –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–æ–ª—ñ–≤
        // action: –§—É–Ω–∫—Ü—ñ—è-—Å–∏–º—É–ª—è—Ü—ñ—è, —è–∫–∞ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –ø—Ä–∏ —É—Å–ø—ñ—Ö—É
        const TASKS = {
            // --- –†—ñ–≤–µ–Ω—å 1 ---
            'l1_select': { command: '–í–∏–¥—ñ–ª—ñ—Ç—å –≤—Å–µ!', key: 'a', level: 1, fieldId: 'workspace1', 
                setup: () => {
                    workspace1.value = "–¶–µ —è–∫–∏–π—Å—å —Ç–µ–∫—Å—Ç –¥–ª—è –≤–∏–¥—ñ–ª–µ–Ω–Ω—è."; workspace2.value = "";
                    workspace1.blur();
                },
                action: () => { workspace1.select(); }
            },
            'l1_copy': { command: '–°–∫–æ–ø—ñ—é–π—Ç–µ!', key: 'c', level: 1, fieldId: 'workspace1', 
                setup: () => {
                    workspace1.value = "–°–ï–ö–†–ï–¢–ù–ò–ô –ö–û–î 123"; workspace2.value = "";
                    workspace1.select();
                },
                action: () => {
                    const s = workspace1.value.substring(workspace1.selectionStart, workspace1.selectionEnd);
                    gameClipboard = s || gameClipboard;
                }
            },
            'l1_paste': { command: '–í—Å—Ç–∞–≤—Ç–µ!', key: 'v', level: 1, fieldId: 'workspace1', 
                setup: () => {
                    workspace1.value = "–í—Å—Ç–∞–≤—Ç–µ —Ç–µ–∫—Å—Ç —Å—é–¥–∏: "; workspace2.value = "";
                    workspace1.setSelectionRange(workspace1.value.length, workspace1.value.length);
                },
                action: () => { workspace1.value += gameClipboard; }
            },
            'l1_undo': { command: '–°–∫–∞—Å—É–π—Ç–µ!', key: 'z', level: 1, fieldId: 'workspace1', 
                setup: () => {
                    undoState1 = "–¶–µ –±—É–≤ –ø–æ—á–∞—Ç–∫–æ–≤–∏–π —Å—Ç–∞–Ω. ";
                    workspace1.value = undoState1 + "–ê –¶–ï –í–ñ–ï –ó–ê–ô–í–ï!"; workspace2.value = "";
                },
                action: () => { workspace1.value = undoState1; }
            },
            
            // --- –†—ñ–≤–µ–Ω—å 2 ---
            'l2_copy1': { command: '–°–∫–æ–ø—ñ—é–π—Ç–µ –∑ –ü–æ–ª—è 1', key: 'c', level: 2, fieldId: 'workspace1', 
                setup: () => {
                    workspace1.value = "–ö–û–î –î–õ–Ø –ü–û–õ–Ø 2"; workspace2.value = "";
                    workspace1.select();
                },
                action: () => {
                    const s = workspace1.value.substring(workspace1.selectionStart, workspace1.selectionEnd);
                    gameClipboard = s || gameClipboard;
                }
            },
            'l2_paste2': { command: '–í—Å—Ç–∞–≤—Ç–µ —É –ü–æ–ª–µ 2', key: 'v', level: 2, fieldId: 'workspace2', 
                setup: () => {
                    workspace1.value = "(—Ç—É—Ç –º–∞—î –±—É—Ç–∏ –≤–∞—à –∫–æ–¥)"; 
                    workspace2.value = "–í—Å—Ç–∞–≤—Ç–µ —Å—é–¥–∏: ";
                    workspace2.setSelectionRange(workspace2.value.length, workspace2.value.length);
                },
                action: () => { workspace2.value += gameClipboard; }
            },
            'l2_select1': { command: '–í–∏–¥—ñ–ª—ñ—Ç—å –≤—Å–µ —É –ü–æ–ª—ñ 1', key: 'a', level: 2, fieldId: 'workspace1', 
                setup: () => {
                    workspace1.value = "–¢–µ–∫—Å—Ç —É –ø–æ–ª—ñ 1"; workspace2.value = "–¢–µ–∫—Å—Ç —É –ø–æ–ª—ñ 2";
                    workspace1.blur();
                },
                action: () => { workspace1.select(); }
            },
            'l2_select2': { command: '–í–∏–¥—ñ–ª—ñ—Ç—å –≤—Å–µ —É –ü–æ–ª—ñ 2', key: 'a', level: 2, fieldId: 'workspace2', 
                setup: () => {
                    workspace1.value = "–¢–µ–∫—Å—Ç —É –ø–æ–ª—ñ 1"; workspace2.value = "–¢–µ–∫—Å—Ç —É –ø–æ–ª—ñ 2";
                    workspace2.blur();
                },
                action: () => { workspace2.select(); }
            },
            'l2_undo1': { command: '–°–∫–∞—Å—É–π—Ç–µ —É –ü–æ–ª—ñ 1', key: 'z', level: 2, fieldId: 'workspace1', 
                setup: () => {
                    undoState1 = "–ü–æ–ª–µ 1 - —Å—Ç–∞–Ω 1. ";
                    workspace1.value = undoState1 + "–ó–ê–ô–í–ï"; workspace2.value = "–ü–æ–ª–µ 2";
                },
                action: () => { workspace1.value = undoState1; }
            },
            'l2_undo2': { command: '–°–∫–∞—Å—É–π—Ç–µ —É –ü–æ–ª—ñ 2', key: 'z', level: 2, fieldId: 'workspace2', 
                setup: () => {
                    undoState2 = "–ü–æ–ª–µ 2 - —Å—Ç–∞–Ω 1. ";
                    workspace1.value = "–ü–æ–ª–µ 1"; workspace2.value = undoState2 + "–ó–ê–ô–í–ï";
                },
                action: () => { workspace2.value = undoState2; }
            }
        };
        const TASK_KEYS = Object.keys(TASKS);

        // --- –§—É–Ω–∫—Ü—ñ—ó ---

        function startGame() {
            score = 0;
            currentLevel = 1;
            currentIntervalTime = STARTING_TIME;
            gameActive = true;
            gameClipboard = "–ë–£–§–ï–† –û–ë–ú–Ü–ù–£";
            
            updateScoreDisplay();
            levelDisplay.textContent = '1';
            overlay.classList.add('hidden');
            workspace2Container.classList.add('hidden');
            workspace1.value = '–ì—Ä–∞ –ø–æ—á–∏–Ω–∞—î—Ç—å—Å—è...';
            workspace2.value = '';
            
            nextTask();
        }

        function endGame() {
            gameActive = false;
            clearAllTimers();

            overlayTitle.textContent = '–ì—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!';
            overlayScore.textContent = `–í–∞—à —Ä–∞—Ö—É–Ω–æ–∫: ${score}`;
            startButton.textContent = '–°–ø—Ä–æ–±—É–≤–∞—Ç–∏ –∑–Ω–æ–≤—É';
            overlay.classList.remove('hidden');
            taskDisplay.textContent = 'üèÅ';
            workspace1.value = `–í–∞—à —Ñ—ñ–Ω–∞–ª—å–Ω–∏–π —Ä–∞—Ö—É–Ω–æ–∫: ${score}.`;
            workspace2.value = `–î—è–∫—É—é –∑–∞ –≥—Ä—É!`;
            workspace1.readOnly = true;
            workspace2.readOnly = true;
        }

        function nextTask() {
            if (!gameActive) return;

            clearAllTimers();

            // –§—ñ–ª—å—Ç—Ä—É—î–º–æ –∑–∞–≤–¥–∞–Ω–Ω—è –∑–∞ –ø–æ—Ç–æ—á–Ω–∏–º —Ä—ñ–≤–Ω–µ–º
            const availableTaskKeys = TASK_KEYS.filter(key => TASKS[key].level === currentLevel);
            
            let newTaskKey;
            do {
                newTaskKey = availableTaskKeys[Math.floor(Math.random() * availableTaskKeys.length)];
            } while (newTaskKey === currentTaskKey);
            currentTaskKey = newTaskKey;

            const task = TASKS[currentTaskKey];
            taskDisplay.textContent = task.command;
            
            // –ù–∞–ª–∞—à—Ç–æ–≤—É—î–º–æ —Ä–æ–±–æ—á—É –æ–±–ª–∞—Å—Ç—å –¥–ª—è –∑–∞–≤–¥–∞–Ω–Ω—è
            workspace1.readOnly = true;
            workspace2.readOnly = true;
            task.setup(); // –¶—è —Ñ—É–Ω–∫—Ü—ñ—è –Ω–∞–ª–∞—à—Ç—É—î —Ç–µ–∫—Å—Ç —Ç–∞ —Ñ–æ–∫—É—Å

            // –ó–∞–ø—É—Å–∫–∞—î–º–æ —Ç–∞–π–º–µ—Ä–∏
            taskStartTime = Date.now();
            taskTimer = setTimeout(endGame, currentIntervalTime);
            timerInterval = setInterval(updateTimerBar, 30);
            updateTimerBar();
        }

        function updateTimerBar() {
            if (!gameActive) return;
            const elapsedTime = Date.now() - taskStartTime;
            const percentRemaining = 1 - (elapsedTime / currentIntervalTime);
            timerBar.style.width = (percentRemaining * 100) + '%';
        }
        
        function clearAllTimers() {
            clearTimeout(taskTimer);
            clearInterval(timerInterval);
            timerInterval = null;
            taskTimer = null;
        }

        function handleKeyDown(e) {
            if (!gameActive) return;

            // –ó–∞–±–æ—Ä–æ–Ω—è—î–º–æ –¥—Ä—É–∫—É–≤–∞—Ç–∏ (–¥–æ–∑–≤–æ–ª—è—î–º–æ —Ç—ñ–ª—å–∫–∏ Ctrl)
            if (!e.ctrlKey && e.key.length === 1) {
                e.preventDefault();
                playIncorrectAnimation();
            }
            if (!e.ctrlKey) return;

            e.preventDefault(); // –ó–∞–ø–æ–±—ñ–≥–∞—î–º–æ *–≤—Å—ñ–º* —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–º –¥—ñ—è–º Ctrl

            const pressedKey = e.key.toLowerCase();
            const activeFieldElement = document.activeElement;
            const task = TASKS[currentTaskKey];

            if (!task) return; // –Ø–∫—â–æ –∑–∞–≤–¥–∞–Ω–Ω—è —â–µ –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ

            const correctKey = task.key;
            const requiredFieldId = task.fieldId;

            // –ö–õ–Æ–ß–û–í–ê –ü–ï–†–ï–í–Ü–†–ö–ê:
            // 1. –ß–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–∞ –∫–ª–∞–≤—ñ—à–∞?
            // 2. –ß–∏ –∞–∫—Ç–∏–≤–Ω–µ (–≤ —Ñ–æ–∫—É—Å—ñ) –ø—Ä–∞–≤–∏–ª—å–Ω–µ —Ç–µ–∫—Å—Ç–æ–≤–µ –ø–æ–ª–µ?
            if (pressedKey === correctKey && activeFieldElement.id === requiredFieldId) {
                // –ü–†–ê–í–ò–õ–¨–ù–û!
                task.action(); // –í–∏–∫–æ–Ω—É—î–º–æ —Å–∏–º—É–ª—è—Ü—ñ—é (–∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è, –≤—Å—Ç–∞–≤–∫–∞ —Ç–æ—â–æ)
                correctAnswer();
            } else {
                // –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
                playIncorrectAnimation();
            }
        }
        
        function correctAnswer() {
            score++;
            updateScoreDisplay();
            
            currentIntervalTime = Math.max(MIN_TIME, currentIntervalTime * TIME_DECREMENT_FACTOR);
            playCorrectAnimation();
            
            // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ –ø—ñ–¥–≤–∏—â–µ–Ω–Ω—è —Ä—ñ–≤–Ω—è
            if (currentLevel === 1 && score >= LEVEL_UP_SCORE) {
                currentLevel = 2;
                levelDisplay.textContent = '2';
                taskDisplay.textContent = '–†–Ü–í–ï–ù–¨ 2!';
                workspace2Container.classList.remove('hidden');
                clearAllTimers();
                setTimeout(nextTask, 1500); // –î–∞—î–º–æ —á–∞—Å –ø–æ–±–∞—á–∏—Ç–∏ "–†—ñ–≤–µ–Ω—å 2"
            } else {
                // –ó–≤–∏—á–∞–π–Ω–∏–π –ø–µ—Ä–µ—Ö—ñ–¥ –¥–æ –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ –∑–∞–≤–¥–∞–Ω–Ω—è
                clearAllTimers();
                setTimeout(nextTask, 200); // 200–º—Å, —â–æ–± –ø–æ–±–∞—á–∏—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥—ñ—ó
            }
        }

        function updateScoreDisplay() {
            scoreDisplay.textContent = score;
        }

        function playCorrectAnimation() {
            gameArea.classList.add('correct-animation');
            setTimeout(() => {
                gameArea.classList.remove('correct-animation');
            }, 300);
        }
        
        function playIncorrectAnimation() {
            gameArea.classList.add('incorrect-animation');
            setTimeout(() => {
                gameArea.classList.remove('incorrect-animation');
            }, 300);
        }

        // --- –°–ª—É—Ö–∞—á—ñ –ü–æ–¥—ñ–π ---
        startButton.addEventListener('click', startGame);
        window.addEventListener('keydown', handleKeyDown);
        
        // –ó–∞–±–µ–∑–ø–µ—á—É—î–º–æ, —â–æ –ø—Ä–∏ –∫–ª—ñ–∫—É –Ω–∞ –ø–æ–ª–µ –≤–æ–Ω–æ –æ–¥—Ä–∞–∑—É —É —Ñ–æ–∫—É—Å—ñ
        workspace1.addEventListener('focus', () => {
            if (!gameActive) workspace1.blur();
        });
        workspace2.addEventListener('focus', () => {
            if (!gameActive) workspace2.blur();
        });
    </script>

</body>
</html>

<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢—Ä–µ–Ω–∞–∂–µ—Ä –ì–∞—Ä—è—á–∏—Ö –ö–ª–∞–≤—ñ—à</title>
    <!-- –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Å—Ç–∏–ª—ñ –¥–ª—è –≥—Ä–∏ */
        body {
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        /* –°—Ç–∏–ª—å –¥–ª—è —Ç–∞–π–º–µ—Ä–∞ */
        #timer-bar {
            transition: width 0.1s linear;
        }

        /* –ê–Ω—ñ–º–∞—Ü—ñ—è –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ—ó –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ */
        @keyframes correct-flash {
            0% { background-color: #1f2937; } /* bg-gray-800 */
            50% { background-color: #22c55e; } /* –ó–µ–ª–µ–Ω–∏–π */
            100% { background-color: #1f2937; }
        }
        .correct-animation {
            animation: correct-flash 0.3s ease-out;
        }

        /* –ê–Ω—ñ–º–∞—Ü—ñ—è –¥–ª—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ—ó –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ */
        @keyframes incorrect-shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        .incorrect-animation {
            animation: incorrect-shake 0.3s ease-out;
            background-color: #ef4444; /* –ß–µ—Ä–≤–æ–Ω–∏–π */
        }
        
        /* –°—Ç–∏–ª—ñ –¥–ª—è —Ä–æ–±–æ—á–æ—ó –æ–±–ª–∞—Å—Ç—ñ */
        #workspace {
            font-family: monospace;
            caret-color: #34d399; /* –ö–æ–ª—ñ—Ä –∫—É—Ä—Å–æ—Ä–∞ */
        }
        /* –ü—Ä–∏—Ö–æ–≤—É—î–º–æ –∫—É—Ä—Å–æ—Ä, –∫–æ–ª–∏ –≤—ñ–Ω –Ω–µ–∞–∫—Ç–∏–≤–Ω–∏–π, —â–æ–± –Ω–µ –∑–±–∏–≤–∞—Ç–∏ –∑ —Ç–æ–ª–∫—É */
        #workspace:not(:focus) {
            caret-color: transparent;
        }
    </style>
</head>
<body class="bg-gray-900 text-white flex items-center justify-center min-h-screen p-4">

    <div class="w-full max-w-2xl mx-auto bg-gray-800 rounded-2xl shadow-2xl p-6 md:p-10 transition-all">
        
        <h1 class="text-3xl md:text-4xl font-bold text-center mb-4 text-cyan-400">–¢—Ä–µ–Ω–∞–∂–µ—Ä –ì–∞—Ä—è—á–∏—Ö –ö–ª–∞–≤—ñ—à</h1>
        
        <!-- –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó -->
        <div class="bg-gray-700 p-4 rounded-lg mb-6 text-sm">
            <p class="font-bold mb-2">–Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó:</p>
            <p class="mb-2">–í–∏–∫–æ–Ω—É–π—Ç–µ –∑–∞–≤–¥–∞–Ω–Ω—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –≥–∞—Ä—è—á–∏—Ö –∫–ª–∞–≤—ñ—à —É —Ç–µ–∫—Å—Ç–æ–≤–æ–º—É –ø–æ–ª—ñ –Ω–∏–∂—á–µ. –®–≤–∏–¥–∫—ñ—Å—Ç—å –∑—Ä–æ—Å—Ç–∞—Ç–∏–º–µ!</p>
            <ul class="list-disc list-inside">
                <li><strong class="text-cyan-300">–í–∏–¥—ñ–ª–∏—Ç–∏ –≤—Å–µ:</strong> Ctrl + A</li>
                <li><strong class="text-cyan-300">–ö–æ–ø—ñ—é–≤–∞—Ç–∏:</strong> Ctrl + C</li>
                <li><strong class="text-cyan-300">–í—Å—Ç–∞–≤–∏—Ç–∏:</strong> Ctrl + V</li>
                <li><strong class="text-cyan-300">–°–∫–∞—Å—É–≤–∞—Ç–∏:</strong> Ctrl + Z</li>
            </ul>
        </div>

        <!-- –Ü–≥—Ä–æ–≤–∞ –∑–æ–Ω–∞ -->
        <div id="game-container" class="relative">
            <!-- –†–∞—Ö—É–Ω–æ–∫ -->
            <div class="absolute top-2 right-2 bg-gray-900 px-4 py-2 rounded-lg shadow-inner z-10">
                <span class="font-medium">–†–∞—Ö—É–Ω–æ–∫:</span>
                <span id="score" class="font-bold text-2xl text-cyan-400">0</span>
            </div>

            <!-- –ó–∞–≤–¥–∞–Ω–Ω—è -->
            <div class="mb-4 text-center">
                 <p class="text-gray-400 text-lg mb-2">–ö–æ–º–∞–Ω–¥–∞:</p>
                <div id="task-display" class="text-4xl md:text-5xl font-extrabold text-white h-16 flex items-center justify-center">
                    <!-- –ó–∞–≤–¥–∞–Ω–Ω—è –∑'—è–≤–∏—Ç—å—Å—è —Ç—É—Ç -->
                </div>
            </div>

            <!-- –ó–æ–Ω–∞ –∑–∞–≤–¥–∞–Ω–Ω—è (–†–æ–±–æ—á–∞ –æ–±–ª–∞—Å—Ç—å) -->
            <div id="game-area" class="bg-gray-900 rounded-lg p-4 shadow-inner">
                <textarea 
                    id="workspace" 
                    class="w-full h-48 bg-gray-800 text-white p-4 rounded-md border border-gray-700 focus:outline-none focus:border-cyan-500 focus:ring-2 focus:ring-cyan-500 resize-none"
                    spellcheck="false">
                </textarea>
            </div>

            <!-- –¢–∞–π–º–µ—Ä -->
            <div class="w-full bg-gray-700 rounded-full h-4 mt-6 overflow-hidden shadow-inner">
                <div id="timer-bar" class="bg-cyan-500 h-4 rounded-full" style="width: 100%"></div>
            </div>
        </div>

        <!-- –û–≤–µ—Ä–ª–µ–π (–°—Ç–∞—Ä—Ç / –ö—ñ–Ω–µ—Ü—å –≥—Ä–∏) -->
        <div id="overlay" class="absolute inset-0 bg-gray-900 bg-opacity-95 flex flex-col items-center justify-center text-center p-4 rounded-2xl">
            <h2 id="overlay-title" class="text-4xl font-bold mb-4">–ü–æ—á–∞—Ç–∏ –≥—Ä—É</h2>
            <p id="overlay-score" class="text-2xl mb-6"></p>
            <button id="start-button" class="bg-cyan-500 hover:bg-cyan-400 text-gray-900 font-bold py-3 px-8 rounded-full text-xl shadow-lg transition-transform transform hover:scale-105">
                –ü–æ—á–∞—Ç–∏
            </button>
        </div>

    </div>

    <script>
        // --- DOM –ï–ª–µ–º–µ–Ω—Ç–∏ ---
        const scoreDisplay = document.getElementById('score');
        const taskDisplay = document.getElementById('task-display');
        const timerBar = document.getElementById('timer-bar');
        const overlay = document.getElementById('overlay');
        const overlayTitle = document.getElementById('overlay-title');
        const overlayScore = document.getElementById('overlay-score');
        const startButton = document.getElementById('start-button');
        const gameArea = document.getElementById('game-area');
        const workspace = document.getElementById('workspace');

        // --- –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≥—Ä–∏ ---
        const TASKS = {
            'select': { command: '–í–∏–¥—ñ–ª—ñ—Ç—å –≤—Å–µ!', key: 'a' },
            'copy':   { command: '–°–∫–æ–ø—ñ—é–π—Ç–µ!', key: 'c' },
            'paste':  { command: '–í—Å—Ç–∞–≤—Ç–µ!', key: 'v' },
            'undo':   { command: '–°–∫–∞—Å—É–π—Ç–µ!', key: 'z' }
        };
        const TASK_KEYS = Object.keys(TASKS); // ['select', 'copy', 'paste', 'undo']

        const STARTING_TIME = 4000; // 4 —Å–µ–∫—É–Ω–¥–∏ –Ω–∞ –ø–æ—á–∞—Ç–æ–∫
        const MIN_TIME = 1000;      // 1 —Å–µ–∫—É–Ω–¥–∞ –º—ñ–Ω—ñ–º—É–º
        const TIME_DECREMENT_FACTOR = 0.98; // –®–≤–∏–¥–∫—ñ—Å—Ç—å –∑—Ä–æ—Å—Ç–∞—î –Ω–∞ 2%

        // --- –°—Ç–∞–Ω –≥—Ä–∏ ---
        let score = 0;
        let gameActive = false;
        let currentTaskKey = null;
        let currentIntervalTime = STARTING_TIME;
        
        let taskTimer = null; // ID –¥–ª—è setTimeout
        let timerInterval = null; // ID –¥–ª—è setInterval (–æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–º—É–≥–∏)
        let taskStartTime = 0;

        // --- –°—Ç–∞–Ω —Å–∏–º—É–ª—è—Ü—ñ—ó ---
        let gameClipboard = ""; // –ù–∞—à "—Ñ–∞–ª—å—à–∏–≤–∏–π" –±—É—Ñ–µ—Ä –æ–±–º—ñ–Ω—É
        let undoState = ""; // –°—Ç–∞–Ω –¥–ª—è —Å–∏–º—É–ª—è—Ü—ñ—ó —Å–∫–∞—Å—É–≤–∞–Ω–Ω—è

        // --- –§—É–Ω–∫—Ü—ñ—ó ---

        function startGame() {
            score = 0;
            currentIntervalTime = STARTING_TIME;
            gameActive = true;
            gameClipboard = "–ü–û–ß–ê–¢–ö–û–í–ò–ô_–ë–£–§–ï–†";
            
            updateScoreDisplay();
            overlay.classList.add('hidden');
            workspace.value = '–ì—Ä–∞ –ø–æ—á–∏–Ω–∞—î—Ç—å—Å—è...';
            
            nextTask();
        }

        function endGame() {
            gameActive = false;
            clearAllTimers();

            overlayTitle.textContent = '–ì—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!';
            overlayScore.textContent = `–í–∞—à —Ä–∞—Ö—É–Ω–æ–∫: ${score}`;
            startButton.textContent = '–°–ø—Ä–æ–±—É–≤–∞—Ç–∏ –∑–Ω–æ–≤—É';
            overlay.classList.remove('hidden');
            taskDisplay.textContent = 'üèÅ';
            workspace.value = `–í–∞—à —Ñ—ñ–Ω–∞–ª—å–Ω–∏–π —Ä–∞—Ö—É–Ω–æ–∫: ${score}. –î—è–∫—É—é –∑–∞ –≥—Ä—É!`;
            workspace.readOnly = true;
        }

        /**
         * –ì–µ–Ω–µ—Ä—É—î –Ω–æ–≤–µ –∑–∞–≤–¥–∞–Ω–Ω—è —Ç–∞ –Ω–∞–ª–∞—à—Ç–æ–≤—É—î —Ä–æ–±–æ—á—É –æ–±–ª–∞—Å—Ç—å
         */
        function nextTask() {
            if (!gameActive) return;

            clearAllTimers(); // –û—á–∏—â—É—î–º–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ —Ç–∞–π–º–µ—Ä–∏

            // –û–±–∏—Ä–∞—î–º–æ –≤–∏–ø–∞–¥–∫–æ–≤–µ –∑–∞–≤–¥–∞–Ω–Ω—è
            let newTaskKey;
            do {
                newTaskKey = TASK_KEYS[Math.floor(Math.random() * TASK_KEYS.length)];
            } while (newTaskKey === currentTaskKey);
            currentTaskKey = newTaskKey;

            const task = TASKS[currentTaskKey];
            taskDisplay.textContent = task.command;
            
            // –ù–∞–ª–∞—à—Ç–æ–≤—É—î–º–æ —Ä–æ–±–æ—á—É –æ–±–ª–∞—Å—Ç—å –¥–ª—è –∑–∞–≤–¥–∞–Ω–Ω—è
            workspace.readOnly = true; // –ó–∞–±–æ—Ä–æ–Ω—è—î–º–æ –¥—Ä—É–∫—É–≤–∞—Ç–∏
            workspace.focus();

            switch (currentTaskKey) {
                case 'select':
                    workspace.value = "–¶–µ —è–∫–∏–π—Å—å —Ç–µ–∫—Å—Ç –¥–ª—è –≤–∏–¥—ñ–ª–µ–Ω–Ω—è.\n–í—ñ–Ω –º–∞—î –∫—ñ–ª—å–∫–∞ —Ä—è–¥–∫—ñ–≤.\n–í–∏–¥—ñ–ª—ñ—Ç—å –π–æ–≥–æ –≤–µ—Å—å!";
                    workspace.blur(); // –ó–Ω—ñ–º–∞—î–º–æ —Ñ–æ–∫—É—Å, —â–æ–± Ctrl+A –±—É–ª–æ –ø–æ–º—ñ—Ç–Ω—ñ—à–µ
                    break;
                case 'copy':
                    workspace.value = "–°–ï–ö–†–ï–¢–ù–ò–ô –ö–û–î 123";
                    workspace.select(); // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–¥—ñ–ª—è—î–º–æ —Ç–µ–∫—Å—Ç –¥–ª—è –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è
                    break;
                case 'paste':
                    workspace.value = "–í—Å—Ç–∞–≤—Ç–µ —Ç–µ–∫—Å—Ç —Å—é–¥–∏: ";
                    // –ü–µ—Ä–µ–º—ñ—â—É—î–º–æ –∫—É—Ä—Å–æ—Ä –≤ –∫—ñ–Ω–µ—Ü—å
                    workspace.setSelectionRange(workspace.value.length, workspace.value.length);
                    break;
                case 'undo':
                    undoState = "–¶–µ –±—É–≤ –ø–æ—á–∞—Ç–∫–æ–≤–∏–π —Å—Ç–∞–Ω. ";
                    workspace.value = undoState + "–ê –¶–ï –í–ñ–ï –ó–ê–ô–í–ï!";
                    break;
            }

            // –ó–∞–ø—É—Å–∫–∞—î–º–æ —Ç–∞–π–º–µ—Ä–∏ –¥–ª—è –Ω–æ–≤–æ–≥–æ –∑–∞–≤–¥–∞–Ω–Ω—è
            taskStartTime = Date.now();
            taskTimer = setTimeout(endGame, currentIntervalTime);
            timerInterval = setInterval(updateTimerBar, 30);
            updateTimerBar();
        }

        function updateTimerBar() {
            if (!gameActive) return;
            const elapsedTime = Date.now() - taskStartTime;
            const percentRemaining = 1 - (elapsedTime / currentIntervalTime);
            timerBar.style.width = (percentRemaining * 100) + '%';
        }
        
        function clearAllTimers() {
            clearTimeout(taskTimer);
            clearInterval(timerInterval);
            taskTimer = null;
            timerInterval = null;
        }

        /**
         * –û–±—Ä–æ–±–Ω–∏–∫ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è –∫–ª–∞–≤—ñ—à
         */
        function handleKeyDown(e) {
            if (!gameActive) return;

            // –ó–∞–±–æ—Ä–æ–Ω—è—î–º–æ –¥—Ä—É–∫—É–≤–∞—Ç–∏ –≤ –ø–æ–ª—ñ
            if (!e.ctrlKey && e.key.length === 1) {
                e.preventDefault();
                playIncorrectAnimation();
            }

            // –ù–∞—Å —Ü—ñ–∫–∞–≤–∏—Ç—å —Ç—ñ–ª—å–∫–∏ Ctrl
            if (!e.ctrlKey) return;

            // –ó–∞–ø–æ–±—ñ–≥–∞—î–º–æ *–≤—Å—ñ–º* —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–º –¥—ñ—è–º Ctrl
            e.preventDefault();

            const pressedKey = e.key.toLowerCase();
            const correctKey = TASKS[currentTaskKey].key;

            if (pressedKey === correctKey) {
                // –ü–†–ê–í–ò–õ–¨–ù–û!
                
                // –í–∏–∫–æ–Ω—É—î–º–æ —Å–∏–º—É–ª—è—Ü—ñ—é –¥—ñ—ó
                switch (currentTaskKey) {
                    case 'select':
                        workspace.select();
                        break;
                    case 'copy':
                        // –ö–æ–ø—ñ—é—î–º–æ –≤–∏–¥—ñ–ª–µ–Ω–∏–π —Ç–µ–∫—Å—Ç —É –Ω–∞—à –±—É—Ñ–µ—Ä
                        const selection = workspace.value.substring(workspace.selectionStart, workspace.selectionEnd);
                        gameClipboard = selection || gameClipboard; // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ, —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ —â–æ—Å—å –≤–∏–¥—ñ–ª–µ–Ω–æ
                        break;
                    case 'paste':
                        workspace.value += gameClipboard;
                        break;
                    case 'undo':
                        workspace.value = undoState;
                        break;
                }
                
                // –ó–∞—Ä–∞—Ö–æ–≤—É—î–º–æ –±–∞–ª —ñ –ø–µ—Ä–µ—Ö–æ–¥–∏–º–æ –¥–æ –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ
                correctAnswer();
            } else {
                // –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
                playIncorrectAnimation();
            }
        }
        
        /**
         * –û–±—Ä–æ–±–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—ó –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
         */
        function correctAnswer() {
            score++;
            updateScoreDisplay();
            
            // –ó–±—ñ–ª—å—à—É—î–º–æ —à–≤–∏–¥–∫—ñ—Å—Ç—å
            currentIntervalTime = Math.max(MIN_TIME, currentIntervalTime * TIME_DECREMENT_FACTOR);
            
            // –í—ñ–∑—É–∞–ª—å–Ω–∏–π –≤—ñ–¥–≥—É–∫
            playCorrectAnimation();
            
            // –û—á–∏—â—É—î–º–æ —Ç–∞–π–º–µ—Ä–∏ —ñ —á–µ–∫–∞—î–º–æ 200–º—Å, —â–æ–± –≥—Ä–∞–≤–µ—Ü—å –ø–æ–±–∞—á–∏–≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            clearAllTimers();
            setTimeout(nextTask, 200);
        }

        function updateScoreDisplay() {
            scoreDisplay.textContent = score;
        }

        function playCorrectAnimation() {
            gameArea.classList.add('correct-animation');
            setTimeout(() => {
                gameArea.classList.remove('correct-animation');
            }, 300);
        }
        
        function playIncorrectAnimation() {
            gameArea.classList.add('incorrect-animation');
            setTimeout(() => {
                gameArea.classList.remove('incorrect-animation');
            }, 300);
        }

        // --- –°–ª—É—Ö–∞—á—ñ –ü–æ–¥—ñ–π ---
        startButton.addEventListener('click', startGame);
        // –°–ª—É—Ö–∞—î–º–æ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è –∫–ª–∞–≤—ñ—à –Ω–∞ *–≤–µ—Å—å* –¥–æ–∫—É–º–µ–Ω—Ç
        window.addEventListener('keydown', handleKeyDown);
        // –ó–∞–±–µ–∑–ø–µ—á—É—î–º–æ, —â–æ –ø—Ä–∏ –∫–ª—ñ–∫—É –Ω–∞ –ø–æ–ª–µ –≤–æ–Ω–æ –æ–¥—Ä–∞–∑—É —É —Ñ–æ–∫—É—Å—ñ
        workspace.addEventListener('focus', () => {
            if (!gameActive) workspace.blur();
        });
    </script>

</body>
</html>
